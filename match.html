<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocean Memory - Sea Matching Game</title>
    <!-- Favicon using your logo.png -->
    <link rel="icon" type="image/png" href="logo.jpg">
    <link rel="apple-touch-icon" href="logo.jpg">
    <meta name="msapplication-TileImage" content="logo.png">
    <meta name="theme-color" content="#0a2a43">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0077be 0%, #003d5c 50%, #001a2e 100%);
        }

        /* Video Loader Styles */
        .video-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #001a2e;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 1s ease-out;
        }

        .video-loader.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        .loader-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
        }

        .loader-content {
            text-align: center;
            color: white;
            position: relative;
            z-index: 1;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            max-width: 90%;
        }

        .loader-title {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(0, 191, 255, 0.7);
        }

        .loader-text {
            font-size: 1.2rem;
            margin-bottom: 30px;
            max-width: 600px;
            line-height: 1.6;
        }

        .skip-btn {
            padding: 12px 30px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .skip-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .progress-container {
            width: 100%;
            max-width: 500px;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            margin-top: 20px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #00bfff, #0066ff);
            border-radius: 5px;
            transition: width 0.3s ease;
        }

        .ocean-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0077be 0%, #003d5c 50%, #001a2e 100%);
            overflow: auto;
        }

        .ocean-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(64, 224, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 191, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(30, 144, 255, 0.05) 0%, transparent 70%);
            pointer-events: none;
            animation: oceanFlow 20s ease-in-out infinite;
        }

        @keyframes oceanFlow {
            0%, 100% { opacity: 0.3; transform: translateY(0px); }
            50% { opacity: 0.7; transform: translateY(-10px); }
        }

        .bubbles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .bubbles::before,
        .bubbles::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: bubble 8s infinite ease-in-out;
        }

        .bubbles::before {
            left: 10%;
            animation-delay: 0s;
        }

        .bubbles::after {
            left: 80%;
            animation-delay: 4s;
        }

        @keyframes bubble {
            0% {
                bottom: -50px;
                opacity: 0;
                transform: scale(0.5);
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                bottom: 100vh;
                opacity: 0;
                transform: scale(1.2);
            }
        }

        .game-container {
            position: relative;
            z-index: 1;
            width: 100%;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .game-header {
            text-align: center;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .game-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: #ffffff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 15px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .game-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            max-width: 600px;
            margin: 0 auto;
        }

        .stat {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .stat:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .stat-label {
            display: block;
            font-size: 0.9rem;
            color: #b3d9ff;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .stat-value {
            display: block;
            font-size: 1.3rem;
            font-weight: bold;
            color: #ffffff;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .game-main {
            text-align: center;
            flex: 1;
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .level-info {
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .level-info h2 {
            font-size: 1.8rem;
            color: #ffffff;
            margin-bottom: 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .level-info p {
            font-size: 1rem;
            color: #b3d9ff;
            font-weight: 500;
        }

        .game-board {
            display: grid;
            gap: 10px;
            justify-content: center;
            margin: 0 auto 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 1000px;
        }

        .game-board.level-1,
        .game-board.level-2 { grid-template-columns: repeat(2, 1fr); }
        .game-board.level-3,
        .game-board.level-4 { grid-template-columns: repeat(3, 1fr); }
        .game-board.level-5,
        .game-board.level-6,
        .game-board.level-7,
        .game-board.level-8 { grid-template-columns: repeat(4, 1fr); }
        .game-board.level-9,
        .game-board.level-10 { grid-template-columns: repeat(5, 1fr); }

        .card {
            aspect-ratio: 1;
            min-height: 60px;
            max-height: 150px;
            perspective: 1000px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .card:hover {
            transform: translateY(-5px) scale(1.02);
            z-index: 10;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
            transform-style: preserve-3d;
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front,
        .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        .card-front {
            background: linear-gradient(135deg, #1e88e5 0%, #1565c0 100%);
            color: white;
            transform: rotateY(180deg);
        }

        .card-back {
            background: linear-gradient(135deg, #26a69a 0%, #00695c 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .wave-icon {
            font-size: 2rem;
            opacity: 0.7;
            animation: wave 2s ease-in-out infinite;
        }

        @keyframes wave {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .card.matched {
            animation: matchSuccess 0.6s ease-in-out;
            pointer-events: none;
        }

        .card.matched .card-inner {
            transform: rotateY(180deg) scale(1.1);
        }

        .card.matched .card-front {
            background: linear-gradient(135deg, #66bb6a 0%, #388e3c 100%);
            box-shadow: 0 0 20px rgba(102, 187, 106, 0.5);
        }

        @keyframes matchSuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .card.wrong {
            animation: wrongMatch 0.5s ease-in-out;
        }

        @keyframes wrongMatch {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .card.hinting {
            animation: hintGlow 2s ease-in-out;
        }

        @keyframes hintGlow {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            }
            50% { 
                transform: scale(1.1);
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
                z-index: 20;
            }
        }

        .game-controls {
            margin-top: auto;
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.4);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #ff8a5b 0%, #ffa726 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.6);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #26a69a 0%, #00695c 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(38, 166, 154, 0.4);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #4db6ac 0%, #00796b 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(38, 166, 154, 0.6);
        }

        .btn-tertiary {
            background: linear-gradient(135deg, #9c27b0 0%, #673ab7 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);
        }

        .btn-tertiary:hover {
            background: linear-gradient(135deg, #ba68c8 0%, #7e57c2 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(156, 39, 176, 0.6);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            background: #666;
        }

        .btn:disabled:hover {
            transform: none;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal.show {
            display: flex;
            animation: modalFadeIn 0.3s ease-out;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: linear-gradient(135deg, #1e88e5 0%, #1565c0 100%);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(255, 255, 255, 0.3);
            animation: modalSlideIn 0.4s ease-out;
        }

        .discount-modal .modal-content {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        @keyframes modalSlideIn {
            from { 
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header h2 {
            font-size: 2.2rem;
            color: white;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .celebration-animation {
            font-size: 3.5rem;
            animation: celebrate 1s ease-in-out infinite;
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(180deg); }
        }

        .fish-fact {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .fish-icon {
            font-size: 3.5rem;
            margin-bottom: 10px;
            animation: fishSwim 2s ease-in-out infinite;
        }

        @keyframes fishSwim {
            0%, 100% { transform: translateX(0) scaleX(1); }
            50% { transform: translateX(10px) scaleX(-1); }
        }

        .fish-fact h3 {
            font-size: 1.4rem;
            color: #ffffff;
            margin-bottom: 10px;
        }

        .fish-fact p {
            font-size: 1rem;
            color: #b3d9ff;
            line-height: 1.5;
        }

        .level-stats,
        .final-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat-item .stat-label {
            display: block;
            font-size: 0.85rem;
            color: #b3d9ff;
            margin-bottom: 5px;
        }

        .stat-item .stat-value {
            display: block;
            font-size: 1.2rem;
            font-weight: bold;
            color: #ffffff;
        }

        .modal-footer {
            margin-top: 20px;
        }

        .modal-body {
            color: white;
        }

        .modal-body h3 {
            font-size: 1.6rem;
            margin-bottom: 10px;
            color: white;
        }

        .modal-body p {
            font-size: 1rem;
            color: #b3d9ff;
            margin-bottom: 15px;
        }

        .discount-details {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
        }

        .discount-code {
            font-size: 1.5rem;
            font-weight: bold;
            letter-spacing: 2px;
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            display: inline-block;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .loader-title {
                font-size: 2rem;
            }
            
            .loader-text {
                font-size: 1rem;
            }
            
            .game-title {
                font-size: 2rem;
            }
            
            .game-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stat-value {
                font-size: 1.1rem;
            }
            
            .level-info h2 {
                font-size: 1.5rem;
            }
            
            .level-info p {
                font-size: 0.9rem;
            }
            
            .card {
                min-height: 50px;
                max-height: 100px;
            }
            
            .card-front,
            .card-back {
                font-size: 1.5rem;
            }
            
            .wave-icon {
                font-size: 1.8rem;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            
            .modal-content {
                padding: 20px 15px;
            }
            
            .modal-header h2 {
                font-size: 1.8rem;
            }
            
            .celebration-animation {
                font-size: 3rem;
            }
            
            .fish-icon {
                font-size: 3rem;
            }
        }

        @media (max-width: 480px) {
            .game-board.level-9,
            .game-board.level-10 { 
                grid-template-columns: repeat(4, 1fr); 
            }
            
            .game-board.level-5,
            .game-board.level-6,
            .game-board.level-7,
            .game-board.level-8 { 
                grid-template-columns: repeat(3, 1fr); 
            }
            
            .card {
                min-height: 40px;
                max-height: 80px;
            }
            
            .card-front,
            .card-back {
                font-size: 1.2rem;
            }
            
            .level-stats,
            .final-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Video Loader -->
    <div class="video-loader" id="video-loader">
        <video class="loader-video" id="loader-video" autoplay muted loop>
            <source src="127713-739309133_small.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div class="loader-content">
            <h1 class="loader-title">Ocean Memory</h1>
            <p class="loader-text">Dive into an underwater adventure! Match sea creatures to uncover fascinating ocean facts and complete all 10 levels to become an Ocean Memory Master!</p>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <button class="skip-btn" id="skip-btn">Skip Intro</button>
        </div>
    </div>
    
    <div class="ocean-background">
        <div class="bubbles"></div>
        
        <div class="game-container">
            <header class="game-header">
                <h1 class="game-title">Ocean Memory</h1>
                <div class="game-stats">
                    <div class="stat">
                        <span class="stat-label">Level</span>
                        <span class="stat-value" id="current-level">1</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Score</span>
                        <span class="stat-value" id="score">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Time</span>
                        <span class="stat-value" id="timer">00:00</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Moves</span>
                        <span class="stat-value" id="moves">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Discount Points</span>
                        <span class="stat-value" id="discount-points">0</span>
                    </div>
                </div>
            </header>

            <main class="game-main">
                <div class="level-info">
                    <h2 id="level-title">Level 1 - Shallow Waters</h2>
                    <p id="level-description">Match 2 pairs to continue your ocean adventure!</p>
                </div>

                <div class="game-board" id="game-board">
                    <!-- Cards will be generated by JavaScript -->
                </div>

                <div class="game-controls">
                    <button class="btn btn-primary" id="restart-btn">🔄 Restart Level</button>
                    <button class="btn btn-secondary" id="hint-btn">💡 Hint (3 left)</button>
                    <button class="btn btn-tertiary" id="redeem-btn">💰 Redeem Points</button>
                </div>
            </main>
        </div>

        <!-- Level Complete Modal -->
        <div class="modal" id="level-complete-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Level Complete!</h2>
                    <div class="celebration-animation">🎉</div>
                </div>
                <div class="modal-body">
                    <div class="fish-fact">
                        <div class="fish-icon" id="fact-fish-icon">🐠</div>
                        <h3 id="fact-title">Amazing Fish Fact</h3>
                        <p id="fact-description">Did you know that fish are amazing creatures?</p>
                    </div>
                    <div class="level-stats">
                        <div class="stat-item">
                            <span class="stat-label">Time:</span>
                            <span class="stat-value" id="level-time">00:00</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Moves:</span>
                            <span class="stat-value" id="level-moves">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Score:</span>
                            <span class="stat-value" id="level-score">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Points Earned:</span>
                            <span class="stat-value" id="level-points">10</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" id="next-level-btn">▶️ Next Level</button>
                </div>
            </div>
        </div>

        <!-- Game Complete Modal -->
        <div class="modal" id="game-complete-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Congratulations!</h2>
                    <div class="celebration-animation">🏆</div>
                </div>
                <div class="modal-body">
                    <h3>You've completed all 10 levels!</h3>
                    <p>You are now a true Ocean Memory Master!</p>
                    <div class="final-stats">
                        <div class="stat-item">
                            <span class="stat-label">Total Score:</span>
                            <span class="stat-value" id="final-score">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Total Time:</span>
                            <span class="stat-value" id="final-time">00:00</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Total Points:</span>
                            <span class="stat-value" id="final-points">100</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" id="play-again-btn">🏆 Play Again</button>
                </div>
            </div>
        </div>

        <!-- Discount Modal -->
        <div class="modal discount-modal" id="discount-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Redeem Your Points</h2>
                    <div class="fish-icon">💰</div>
                </div>
                <div class="modal-body">
                    <div class="discount-details">
                        <p>You have earned <strong><span id="current-points-display">0</span> discount points</strong>!</p>
                        <p>Every 10 points can be redeemed for a discount code.</p>
                        <p>Current exchange rate: <strong>10 points = 1% discount</strong></p>
                        
                        <div id="discount-options" style="display: none;">
                            <p>Select how many points to redeem:</p>
                            <select id="points-to-redeem" class="btn" style="width: 100%; margin: 10px 0;">
                                <option value="10">10 points (1% discount)</option>
                                <option value="20">20 points (2% discount)</option>
                                <option value="30">30 points (3% discount)</option>
                                <option value="40">40 points (4% discount)</option>
                                <option value="50">50 points (5% discount)</option>
                            </select>
                            <button class="btn btn-primary" id="generate-discount-btn">Generate Discount Code</button>
                        </div>
                        
                        <div id="discount-code-display" style="display: none;">
                            <p>Here's your discount code:</p>
                            <div class="discount-code" id="generated-discount-code">OCEAN10</div>
                            <p>Use this code at checkout for your discount!</p>
                            <button class="btn btn-primary" id="close-discount-btn">Close</button>
                        </div>
                        
                        <div id="not-enough-points" style="display: none;">
                            <p>You don't have enough points to redeem yet.</p>
                            <p>Keep playing to earn more points!</p>
                            <button class="btn btn-primary" id="close-not-enough-btn">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
     // Fish Facts Data
const fishFacts = [
    {
        icon: "🐠",
        title: "Tropical Fish Colors",
        fact: "Tropical fish get their vibrant colors from their diet! Carotenoids in algae and small crustaceans create those brilliant blues, yellows, and reds."
    },
    {
        icon: "🐙",
        title: "Octopus Intelligence",
        fact: "Octopuses have three hearts and blue blood! Two hearts pump blood to their gills, while the third pumps blood to the rest of their body."
    },
    {
        icon: "🦈",
        title: "Shark Superpowers",
        fact: "Sharks can detect electrical fields as small as 5 billionths of a volt! This helps them find prey hiding in the sand."
    },
    {
        icon: "🐡",
        title: "Pufferfish Defense",
        fact: "Pufferfish can inflate to 3 times their normal size by quickly gulping water or air into their elastic stomachs!"
    },
    {
        icon: "🐟",
        title: "Fish Memory Myth",
        fact: "Contrary to popular belief, fish have much longer memories than 3 seconds! Some can remember things for months or even years."
    },
    {
        icon: "🦀",
        title: "Crab Communication",
        fact: "Crabs communicate by drumming or waving their claws! Different species have unique 'claw languages' to attract mates."
    },
    {
        icon: "🐠",
        title: "School Behavior",
        fact: "Fish swim in schools to confuse predators and reduce individual risk. A school can have thousands of fish moving as one!"
    },
    {
        icon: "🦑",
        title: "Squid Jet Propulsion",
        fact: "Squids are natural jet engines! They shoot water through their siphon to propel themselves at speeds up to 25 mph."
    },
    {
        icon: "🐢",
        title: "Sea Turtle Navigation",
        fact: "Sea turtles use Earth's magnetic field to navigate thousands of miles across oceans, returning to the exact beach where they were born!"
    },
    {
        icon: "🐋",
        title: "Whale Songs",
        fact: "Humpback whale songs can travel over 1,000 miles underwater! Each population has its own unique 'dialect' that changes over time."
    }
];

// Game Data
const gameData = {
    levels: [
        {
            level: 1,
            title: "Shallow Waters",
            description: "Match 2 pairs to continue your ocean adventure!",
            pairs: 2,
            cards: ["🐠", "🐟"]
        },
        {
            level: 2,
            title: "Coral Gardens",
            description: "Discover the colorful coral reef inhabitants!",
            pairs: 3,
            cards: ["🐠", "🐟", "🐡"]
        },
        {
            level: 3,
            title: "Tide Pools",
            description: "Explore the rocky tide pool creatures!",
            pairs: 4,
            cards: ["🐠", "🐟", "🐡", "🦀"]
        },
        {
            level: 4,
            title: "Kelp Forest",
            description: "Navigate through the underwater forest!",
            pairs: 5,
            cards: ["🐠", "🐟", "🐡", "🦀", "🦑"]
        },
        {
            level: 5,
            title: "Open Ocean",
            description: "Venture into the vast open seas!",
            pairs: 6,
            cards: ["🐠", "🐟", "🐡", "🦀", "🦑", "🐙"]
        },
        {
            level: 6,
            title: "Deeper Waters",
            description: "Dive deeper into mysterious waters!",
            pairs: 7,
            cards: ["🐠", "🐟", "🐡", "🦀", "🦑", "🐙", "🦈"]
        },
        {
            level: 7,
            title: "Shark Territory",
            description: "Enter the domain of ocean predators!",
            pairs: 8,
            cards: ["🐠", "🐟", "🐡", "🦀", "🦑", "🐙", "🦈", "🐢"]
        },
        {
            level: 8,
            title: "Sea Turtle Sanctuary",
            description: "Meet the ancient mariners of the sea!",
            pairs: 9,
            cards: ["🐠", "🐟", "🐡", "🦀", "🦑", "🐙", "🦈", "🐢", "🐳"]
        },
        {
            level: 9,
            title: "Whale Waters",
            description: "Swim with the giants of the ocean!",
            pairs: 10,
            cards: ["🐠", "🐟", "🐡", "🦀", "🦑", "🐙", "🦈", "🐢", "🐳", "🐋"]
        },
        {
            level: 10,
            title: "Ocean Master",
            description: "Face the ultimate ocean memory challenge!",
            pairs: 12,
            cards: ["🐠", "🐟", "🐡", "🦀", "🦑", "🐙", "🦈", "🐢", "🐳", "🐋", "🦭", "🐬"]
        }
    ]
};

// Game Class
class OceanMemoryGame {
    constructor() {
        this.currentLevel = 1;
        this.score = 0;
        this.moves = 0;
        this.startTime = null;
        this.gameTime = 0;
        this.timer = null;
        this.flippedCards = [];
        this.matchedPairs = 0;
        this.isProcessing = false;
        this.hints = 3;
        this.totalGameTime = 0;
        this.discountPoints = 0;
        this.gameActive = false;
        
        // DOM Elements
        this.dom = {
            videoLoader: document.getElementById('video-loader'),
            video: document.getElementById('loader-video'),
            skipBtn: document.getElementById('skip-btn'),
            progressBar: document.getElementById('progress-bar'),
            gameBoard: document.getElementById('game-board'),
            currentLevelEl: document.getElementById('current-level'),
            scoreEl: document.getElementById('score'),
            movesEl: document.getElementById('moves'),
            discountPointsEl: document.getElementById('discount-points'),
            levelTitleEl: document.getElementById('level-title'),
            levelDescEl: document.getElementById('level-description'),
            hintBtn: document.getElementById('hint-btn'),
            timerEl: document.getElementById('timer'),
            levelCompleteModal: document.getElementById('level-complete-modal'),
            gameCompleteModal: document.getElementById('game-complete-modal'),
            discountModal: document.getElementById('discount-modal')
        };
        
        // Initialize video loader
        this.initVideoLoader();
    }

    initVideoLoader() {
        // Start progress bar animation
        let progress = 0;
        const progressInterval = setInterval(() => {
            progress += 1;
            this.dom.progressBar.style.width = `${progress}%`;
            
            if (progress >= 100) {
                clearInterval(progressInterval);
                this.startGame();
            }
        }, 50); // 5 seconds total (100% / 50ms = 200 steps)
        
        // Skip button functionality
        this.dom.skipBtn.addEventListener('click', () => {
            clearInterval(progressInterval);
            this.startGame();
        });
        
        // Check if video can play
        this.dom.video.addEventListener('canplay', () => {
            this.dom.video.play().catch(e => console.log("Video autoplay prevented:", e));
        });
    }
    
    startGame() {
        this.dom.videoLoader.classList.add('fade-out');
        
        setTimeout(() => {
            this.dom.videoLoader.style.display = 'none';
            this.initializeGame();
        }, 1000);
    }

    initializeGame() {
        this.gameActive = true;
        this.updateUI();
        this.createBoard();
        this.startTimer();
        this.bindEvents();
    }

    bindEvents() {
        document.getElementById('restart-btn').addEventListener('click', () => this.restartLevel());
        document.getElementById('hint-btn').addEventListener('click', () => this.useHint());
        document.getElementById('next-level-btn').addEventListener('click', () => this.nextLevel());
        document.getElementById('play-again-btn').addEventListener('click', () => this.resetGame());
        document.getElementById('redeem-btn').addEventListener('click', () => this.showDiscountModal());
        document.getElementById('generate-discount-btn').addEventListener('click', () => this.generateDiscountCode());
        document.getElementById('close-discount-btn').addEventListener('click', () => this.closeDiscountModal());
        document.getElementById('close-not-enough-btn').addEventListener('click', () => this.closeDiscountModal());
    }

    updateUI() {
        const levelData = gameData.levels[this.currentLevel - 1];
        
        this.dom.currentLevelEl.textContent = this.currentLevel;
        this.dom.scoreEl.textContent = this.score;
        this.dom.movesEl.textContent = this.moves;
        this.dom.discountPointsEl.textContent = this.discountPoints;
        this.dom.levelTitleEl.textContent = `Level ${this.currentLevel} - ${levelData.title}`;
        this.dom.levelDescEl.textContent = levelData.description;
        
        this.dom.hintBtn.innerHTML = `💡 Hint (${this.hints} left)`;
        this.dom.hintBtn.disabled = this.hints === 0;
    }

    createBoard() {
        const levelData = gameData.levels[this.currentLevel - 1];
        
        // Clear previous board
        this.dom.gameBoard.innerHTML = '';
        this.dom.gameBoard.className = `game-board level-${this.currentLevel}`;
        
        // Create card pairs
        const cards = [];
        for (let i = 0; i < levelData.pairs; i++) {
            const cardSymbol = levelData.cards[i];
            cards.push(cardSymbol, cardSymbol);
        }
        
        // Shuffle cards
        this.shuffleArray(cards);
        
        // Create card elements
        cards.forEach((symbol, index) => {
            const card = this.createCard(symbol, index);
            this.dom.gameBoard.appendChild(card);
        });
        
        this.matchedPairs = 0;
        this.flippedCards = [];
        this.moves = 0;
        this.updateUI();
    }

    createCard(symbol, index) {
        const card = document.createElement('div');
        card.className = 'card';
        card.dataset.symbol = symbol;
        card.dataset.index = index;
        
        card.innerHTML = `
            <div class="card-inner">
                <div class="card-front">${symbol}</div>
                <div class="card-back">
                    <div class="wave-icon">🌊</div>
                </div>
            </div>
        `;
        
        card.addEventListener('click', () => this.flipCard(card));
        
        return card;
    }

    flipCard(card) {
        if (!this.gameActive || this.isProcessing || 
            card.classList.contains('flipped') || 
            card.classList.contains('matched')) {
            return;
        }

        card.classList.add('flipped');
        this.flippedCards.push(card);

        if (this.flippedCards.length === 2) {
            this.moves++;
            this.updateUI();
            this.checkMatch();
        }
    }

    checkMatch() {
        this.isProcessing = true;
        const [card1, card2] = this.flippedCards;
        const symbol1 = card1.dataset.symbol;
        const symbol2 = card2.dataset.symbol;

        setTimeout(() => {
            if (symbol1 === symbol2) {
                // Match found
                card1.classList.add('matched');
                card2.classList.add('matched');
                this.matchedPairs++;
                this.score += this.calculateScore();
                
                if (this.matchedPairs === gameData.levels[this.currentLevel - 1].pairs) {
                    setTimeout(() => {
                        this.levelComplete();
                    }, 600);
                }
            } else {
                // No match
                card1.classList.add('wrong');
                card2.classList.add('wrong');
                
                setTimeout(() => {
                    card1.classList.remove('flipped', 'wrong');
                    card2.classList.remove('flipped', 'wrong');
                }, 500);
            }
            
            this.flippedCards = [];
            this.isProcessing = false;
            this.updateUI();
        }, 1000);
    }

    calculateScore() {
        const levelMultiplier = this.currentLevel;
        const timeBonus = Math.max(0, 100 - this.gameTime);
        const moveBonus = Math.max(0, 50 - this.moves);
        return (100 * levelMultiplier) + timeBonus + moveBonus;
    }

    levelComplete() {
        this.gameActive = false;
        this.stopTimer();
        this.totalGameTime += this.gameTime;
        
        // Add discount points (10 points per level)
        this.discountPoints += 10;
        
        // Show level complete modal
        const fishFact = fishFacts[this.currentLevel - 1];
        
        document.getElementById('fact-fish-icon').textContent = fishFact.icon;
        document.getElementById('fact-title').textContent = fishFact.title;
        document.getElementById('fact-description').textContent = fishFact.fact;
        document.getElementById('level-time').textContent = this.formatTime(this.gameTime);
        document.getElementById('level-moves').textContent = this.moves;
        document.getElementById('level-score').textContent = this.score;
        document.getElementById('level-points').textContent = '10';
        
        this.dom.levelCompleteModal.classList.add('show');
        
        // Report game completion to points system
        this.reportGameCompletion();
    }
    
    reportGameCompletion() {
        const metrics = {
            matches: gameData.levels[this.currentLevel - 1].pairs,
            time: this.gameTime,
            level: this.currentLevel
        };
        
        if (typeof onOceanGameComplete === 'function') {
            onOceanGameComplete(metrics);
        }
    }

    nextLevel() {
        this.dom.levelCompleteModal.classList.remove('show');
        
        if (this.currentLevel < 10) {
            this.currentLevel++;
            this.hints = Math.min(this.hints + 1, 3); // Restore one hint per level
            this.createBoard();
            this.startTimer();
            this.gameActive = true;
        } else {
            this.gameComplete();
        }
    }

    gameComplete() {
        document.getElementById('final-score').textContent = this.score;
        document.getElementById('final-time').textContent = this.formatTime(this.totalGameTime);
        document.getElementById('final-points').textContent = this.discountPoints;
        this.dom.gameCompleteModal.classList.add('show');
    }

    resetGame() {
        this.dom.gameCompleteModal.classList.remove('show');
        this.currentLevel = 1;
        this.score = 0;
        this.hints = 3;
        this.totalGameTime = 0;
        this.discountPoints = 0;
        this.initializeGame();
    }

    restartLevel() {
        this.stopTimer();
        this.createBoard();
        this.startTimer();
        this.gameActive = true;
    }

    useHint() {
        if (this.hints === 0 || this.isProcessing || !this.gameActive) return;
        
        this.hints--;
        const unflippedCards = Array.from(document.querySelectorAll('.card:not(.flipped):not(.matched)'));
        
        if (unflippedCards.length >= 2) {
            // Find a matching pair
            for (let i = 0; i < unflippedCards.length; i++) {
                for (let j = i + 1; j < unflippedCards.length; j++) {
                    if (unflippedCards[i].dataset.symbol === unflippedCards[j].dataset.symbol) {
                        // Briefly show the matching pair
                        unflippedCards[i].classList.add('hinting');
                        unflippedCards[j].classList.add('hinting');
                        
                        setTimeout(() => {
                            unflippedCards[i].classList.remove('hinting');
                            unflippedCards[j].classList.remove('hinting');
                        }, 2000);
                        
                        this.updateUI();
                        return;
                    }
                }
            }
        }
    }

    showDiscountModal() {
        document.getElementById('current-points-display').textContent = this.discountPoints;
        
        // Show appropriate options based on points available
        if (this.discountPoints >= 10) {
            document.getElementById('discount-options').style.display = 'block';
            document.getElementById('discount-code-display').style.display = 'none';
            document.getElementById('not-enough-points').style.display = 'none';
            
            // Update the select options based on available points
            const select = document.getElementById('points-to-redeem');
            select.innerHTML = '';
            
            for (let i = 1; i <= Math.floor(this.discountPoints / 10); i++) {
                const points = i * 10;
                const option = document.createElement('option');
                option.value = points;
                option.textContent = `${points} points (${i}% discount)`;
                select.appendChild(option);
            }
        } else {
            document.getElementById('discount-options').style.display = 'none';
            document.getElementById('discount-code-display').style.display = 'none';
            document.getElementById('not-enough-points').style.display = 'block';
        }
        
        this.dom.discountModal.classList.add('show');
    }

    generateDiscountCode() {
        const pointsToRedeem = parseInt(document.getElementById('points-to-redeem').value);
        const discountPercent = pointsToRedeem / 10;
        
        if (pointsToRedeem > this.discountPoints) {
            alert("You don't have enough points for this discount!");
            return;
        }
        
        // Generate a random discount code
        const code = `OCEAN${discountPercent}${Math.floor(Math.random() * 1000).toString().padStart(3, '0')}`;
        
        // Deduct the points
        this.discountPoints -= pointsToRedeem;
        this.updateUI();
        
        // Show the code
        document.getElementById('generated-discount-code').textContent = code;
        document.getElementById('discount-options').style.display = 'none';
        document.getElementById('discount-code-display').style.display = 'block';
    }

    closeDiscountModal() {
        this.dom.discountModal.classList.remove('show');
    }

    startTimer() {
        this.startTime = Date.now();
        this.gameTime = 0;
        this.timer = setInterval(() => {
            this.gameTime = Math.floor((Date.now() - this.startTime) / 1000);
            this.dom.timerEl.textContent = this.formatTime(this.gameTime);
        }, 1000);
    }

    stopTimer() {
        if (this.timer) {
            clearInterval(this.timer);
            this.timer = null;
        }
    }

    formatTime(seconds) {
        const minutes = Math.floor(seconds / 60);
        const remainingSeconds = seconds % 60;
        return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
    }

    shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }
}

// Initialize game when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    const game = new OceanMemoryGame();
    
    // Make game available globally for debugging
    window.oceanMemoryGame = game;
});

// Points System Integration
function completeMatchGame(matches, time) {
    const metrics = {
        matches: matches,
        time: time
    };
    
    if (typeof onOceanGameComplete === 'function') {
        return onOceanGameComplete(metrics);
    }
    return 0;
}
    </script>
</body>
</html>